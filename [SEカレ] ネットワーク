【ネットワークとは】
●ある機器から別の機器までのデータを送り届けるための仕組み　
　サーバーやＰＣなどの機器間でデータを転送

●ネットワークの表現
　雲（クラウド）のアイコンを使ってネットワークを表現することが多い。
　前後の文脈によって雲のアイコンが表現しているネットワークの規模は違うので注意。

●ネットワークの構成
　ネットワーク機器で構成する
　・ルーター
　・レイヤ２スイッチ
　・レイヤ３スイッチ

●ネットワーク機器やPCサーバーのネットワークインターフェース（ポート）同士を
適切な伝送媒体（ケーブル）で接続して構成する

●データを送受信するのはアプリケーションがメイン
　➡ネットワークに送り出すデータを作っているのはアプリケーション

●データは複数に分割して転送される
●アプリケーションは一連のデータのまとまり＝フロー
●通信は双方向
　クライアント➡サーバー➡リクエスト
　サーバー➡クライアント➡レスポンス


【ネットワークの転送とは】
●PC/サーバなどの内部でのデータは「０」と「１」のデジタルデータ
●送信機器からデータを送り出すとき電気信号などの物理的な信号に変換

●送信機器のインターフェースかた送り出された物理的信号を適切な宛先機器の
　インターフェースまで送り届ける
●ネットワーク上のデータ転送そのものを実現する基盤➡
●送信元から送り出す信号が、宛先に同じ信号で届くとは限らない
（PCは無線、サーバーは有線でつなげっている、など）

●イーサネット、無線LAN
➡０と１の電気信号をや電波の物理的な信号に変換して送り届ける技術


【ネットワークの分類】
●誰に利用させるネットワークなんのか？
●一番重要なのはネットワーク分類の観点
●プライベートネットワーク（クローズドネットワーク）
　➡限られたユーザーにしか利用させない（家庭内やゲスト、企業の社内ネットワークなど）
●インターネット（オープンネットワーク）
　➡利用するユーザーを限定できない

●企業の社内プライバートネットワーク
　LANとWANで構成する（イントラネットともよぶ）
・LAN　よある拠点ないのネットワーク全体
・WAN　拠点同士のネットワークを接続する
　　　　自前で作ることはできないので通信事業者利用する

●オープンネットワーク
・AS（自立システム）
　インターネットを構成する様々な組織のネットワークのこと
・ASの例➡ISP（プロバイダ）携帯キャリア、NTTコム,BIGROBE..etc、Google
・AS同士が相互接続してAS間の通信ができるようにしている
・すべてのASは必ずどこかでつながっている。

●インターネットにつなげるとは
・ISPとインターネット接続サービスを契約して、ISPが運用するネットワークに所属する
・すでにインターネット接続しているところに相乗りする（カフェなどの店舗ネットワーク）

●インターネット＝WANではない
　インターネットと企業の拠点間を接続するWANは全く別もの。　
　➡WANの先に接続しているのは自社の別の拠点だけ


【プロトコル、ネットワークアーキテクチャ】
●プロトコル➡通信するためのルール
●ネットワークアーキテクチャ
　・複数プロトコルの組み合わせ
　・
　・
●事実上に標準の言語として利用しているネットワークアーキテクチャがTCP/IP
●プロトコルの制御
　アプリケーション」のデータを正しく送り届けるためには、複数のプロトコルを組み合わせる
●ネットワークアーキテクチャは階層化して複数のプロトコルを組み合わせる

●ネットワークインターフェース層
　➡「０」「１」のデータを物理的な信号に変換して伝える
　　同一ネットワーク内のデータ転送を行う
●インターネット層
　➡異なるネットワーク間のデータの転送を行う
　　エンドツーエンド通信物理的な距離はどんなに離れていても届く
●トランスポート層
　➡エンドツーエンド通信の信頼性を確保する　(TCP)
　　アプリケーションへデータを振り分ける　(TCP/UDP)

●アプリケーション層
　➡データの表形式を一致させる　０，１の表現を人間に分かる表現形式に
　　アプリケーション固有の機能を実現する

●TCP/IPの階層
　アプリケーションのデータをIPで宛先まで


●受信側は下の階層からヘッダをチェックして処理していく

●データの呼び方
・どの階層に注目しているかによってデータの呼び方が違う
・

WEBブラウザのデータはTCPで分割される
分割した後の最初だけHTTPヘッダがついている、２つめ以降はHTTPヘッダは付かない


【ネットワーク機器の動作】
●インターフェースで物理的な信号を受信してデジタルデータに復元
●適切なヘッダを参照して転送先を判断
●出力インターフェースから物理信号を送り出す

【レイヤ2スイッチ】
●一つのイーサネットのネットワークを作る
　➡ネットワークの入り口
　社内、家庭の
●スイッチングハブとも呼ばれている
・データ転送の範囲➡ひとつ同じネットワーク内
・データ転送の仕組み➡MACアドレス
●レイヤ２はいくらでも増えせるが、レイヤ２同士はつなげない

【ルータ】
複数のネットワークを相互接続　
データ転送の範囲➡ネットワーク間
データの転送の仕組み➡IPアドレスに基づいてデータっを転送する

【レイヤ３スイッチ】
・レイヤ２にルータ機能が追加されたもの。
　どっちの機能も使えるがほぼルーター使用が多い。
・データ転送の範囲➡データによって同じネットワーク内、またはネットワーク外
・データ転送の仕組み➡レイヤ２スイッチやルータ同じ

【イーサネット】
●同じネットワーク内のイーサネットインターフェース間でデータを「物理的に」
　転送するためのプロトコルで、距離１００mまでの制約がある
　➡０か１のデータを物理的な信号（電気信号など）に変換していく
●企業の拠点のネットワークであるLANを構築する主要な技術
　➡WANの接続するときにもイーサネットを利用していることがほとんど

【イーサネットの規格で決めていること】
●物理層レベル
　利用するインターフェースの形状
　利用するケーブル
●データリンク層
　イーサネットインターフェースの特定（MACアドレス）
●1000BASE-Tが一番使われている規格(UTPｋ－ブル)


【MACアドレス】
●イーサネットインターフェースを識別するための48ビットのアドレス
　あらかじめ割り当てられていて原則、変更できない
　最近はプライバシー保護のため、MACアドレスはランダムになっている
●前半２４ビット：OUI
●後半２４ビット：シリアル番号
●表記のフォーマットが決まっていなくて紛らわしので注意
　１バイト１６進数をーで区切る
　１バイト１６進数を：で区切る
　２バイト１６進数を.で区切る
●それぞれのLANポートにMACアドレスが割り振られる（ランダムに割り振られることが多い）

【UTPケーブル】
●最も利用するイーサネットのケーブル（伝送媒体）いわゆるLANケーブル
●ケーブルの品質によってカテゴリに分類される（一般的はカテゴリ６、いいやつは６Ａ）

【イーサネットのトポロジ】
●初期のイーサネットは「バス」型トポロジ
　一本のケーブル（同軸ケーブル）にぶらさがる
　CSMA/CD➡一本のケーブルをどうやって使い回すか制御する仕組み
　
●現在は「スター型」
　　レイヤ２スイッチを中心としたスター型
　　制御は必要なくなっている
　　レイヤ２スイッチによって送信と受信が同時にできる全二重通信が可能に

【イーサネットのフレームフォーマット】
●イーサネットヘッダ
●FCS
　エラーチェック用
●MTU
　データの最大長　一回あたり１５００バイト
　イーサネットでデータを転送するときには、ほぼ分割しなければならない
　分割じたいはTCPで行う

●イーサネットのデータ転送のイメージ
・イーサネットのネットワークの雲の部分の実態はレイヤ２スイッチ
・レイヤ２スイッチがイーサネットヘッダのMACアドレスを見て適切なインターフェースへ転送する


【レイヤ２スイッチのデータ転送】
●レイヤ２スイッチの設定は何もいらない。電源つけて繋げるだけ

レイヤ２スイッチで技術的に一つのネットワークとは
➡ルータで区切っているネットワークの相互接続
　レイヤ２スイッチを何台も接続していても全体としてひとつのネットワークの認識でよい

●呼び方が色々ある
・スイッチングハブ
・ＬＡＮスイッチ
・イーサネットスイッチ
・単にスイッチ
※単に「ハブ」とは呼ばないようにしたほうが誤解を生まずに済むので気を付ける

【全二重通信】
●データの送受信を同時に行う通信方式。レイヤ２スイッチを使うことで実現している
●仕組みは、UTPケーブル１本は、４対の電気
　➡見た目のケーブルは１本だが、実質的に４本でつながっている。
　　電気信号を流す電気回路が４対
　　・１対で送信の信号、１対で受信の信号、残り２本は使用されてない(容量が大きいときに使用される)

【オートネゴシネーション】
●両端のイーサネットポートで速度と通信方式を最適化する機能
●オートネゴシエーションの仕組み
　➡それぞれのポートが対応している速度/通信方式を通知(FLP)
　➡一番よい速度/通信方式を通知を決定


【IPアドレスの基本】
●データの宛先と送信元をＩＰアドレスで分かるようにする
●TCP/IPで考えるデータは０，１で表す論理的なデータ
●通信するホストを識別
　➡ルータなど複数のインターフェースを持つ機器はインターフェースごとにIPアドレスを設定

【ネットワークにおいてつなぐとは？】
●物理的につなぐ　ケーブルにつなぐ（LANケーブル）
●論理的につなぐ　IPアドレスとサブネットマスクを設定すること
　➡TCP/IPの設定(IPアドレスの設定)をしないとネット使えない

【通信の用途が１つか複数か】
●ユニキャストアドレス　一番の基本
●ブロードキャスト　　　同じネットワーク上のすべtのホスト当て
●マルチキャスト　　　　何等かの特徴をもつグループのホスト当て

【IPアドレスの構成】
●IPアドレス＝ネットワークアドレス＋ホストアドレス

【ネットワークアドレス】
●ホストアドレスのビットすべて「０」
●ルータで区切られる範囲を識別
●ネットワークアドレスは、ネットワークを設計するときに決める
　➡それから各ネットワーク内の機器のホストアドレスを決める

【サブネットマスク】
●ネットワークとホストアドレスの区切りを示す３２美ビット列
　　➡ビット１　ネットワークアドレス
　　　ビット０　ホストアドレス

【サブネットマスクの表記】
●ドット付き１０進数表記
●プレフィクス表記(CIDR)

【IPとMACアドレス】
●TCP/IPでは必ずＩＰアドレスを指定する
●ＩＰだけでは物理的に宛先までデータを転送できない
●IPとイーサネットやWi-Fiなど物理的にデータを転送するためのプロトコルを組み合わせる
●イーサネットでデータを物理信号に変換して送り届けるためにはMACアドレスが必要
●ARPがIPアドレスからMACアドレスまでを求めることができる

【ARP】
イーサネットインターフェースからデータ（IPパケット）を出力するためには
イーサネットインターフェース
●問い合わせたＩＰアドレス
●ユーザーは意識しないし、設定も不要


【ルーター】
●

【ルーティングの動作】
●ルーティングテーブルが完成していることが大前提
　➡設定しなければ動かない
●ルーティングの動作
　・
●通信は双方向
　返事を返せるようなルーティングテーブルを作ること

【ルーティングテーブル】
●ルータが認識しているネットワークへの経路情報をまとめたデータベース
●ルーティングテーブルに登録されていないネットワーク宛てのパケットは破棄される
●コンバージェンス
　➡ルーティングを行うすべてのテーブルに必要な情報が登録されていること

【ルート情報】
●ネットワーク、サブネットマスク、ネクストホップアドレス（次のルーターえ送るもの）

【パケットの転送経路】
●あるネットワークに対する複数のルートがある場合、
　原則ルーティングテーブルには最適のルートのみが登録される
　➡最適ルートの選択：アドミニストレティブ

●経路の切り替える＝ルーティングテーブルの更新
　➡障害が起こったときに経路を切り替える＝各ルーターのルーティングテーブル

【ルーティングテーブルにルート情報を登録】
●IPアドレスを設定する
●リモートネットワーク
　リモートネットワークのルート情報を設定でルーティングテーブルに登録する
　➡スタティックルート
　➡ダイナミックルート（ルーティングプロトコル）　一個だけでなく複数使うのも可
　　どちらも設定をする

●ＩＰアドレスを設定する＝ＩＰのネットワーク


【レイヤ３スイッチ】
●ルータと同じ目的で使用される　
　ネットワークの相互接続
　高速
●データの転送範囲　
　ネットワーク内、間

【VLAN】
●レイヤ２スイッチで仮想的にネットワークを分割する技術
　レイヤ３スイッチの仕組みを理解するためにはＶＬＡＮのことを理解していることが前提
●仕組み
　➡レイヤ２スイッチ

●VLANは設定で自由に分割できる





【TCP/IPの概要】

●信頼性のあるアプリケーション間のデータ転送を行う
●インターネット層より上の階層に位置するプロトコル
●ネットワークインターフェース層では何を使ってもいい
　➡有線イーサネットでも、４G、５GでもOK

●IP（インターネットプロトコル）
・あるホストから別のホストまでデータを転送するために利用するプロトコル
・転送するデータにIPヘッダを付加してIPパケットする
・IPパケットをネットワーク上に送りだすと経路上のルータが宛先まで転送してくれる

●宛先IPアドレスを与えなければいけない
●一般のユーザーには宛先アドレスを自動的に求める仕組みが「ＤＮＳ」

【ポート番号】
●TCP/IPのアプリケーションプロトコルを識別するための番号
　➡TCP/UDPヘッダに記述される　宛先/送信元ポート番号
●ポート番号を見て適切なアプリケーションが安易何なのか判断している

●TCP/IPのアプリケーション間の通信(フロー)はIPアドレスとポート番号の組み合わせで識別できる
　➡「IPアドレス：」のフォーマット

●UDPの特徴
・アプリケーション間のデータの転送を行うのみのプロトコル

【DNSの目的】
・ホスト名からIPアドレスを求める名前解決を行う
・TCP/IPでは必ずIPアドレスを指定しなければならない
・アプリケーションで利用するアドレスからDNSによってIPアドレスを自動的に求める
・TCP/IPの通信を支えるとても重要なシステム
　➡DNSはネットワークの電話帳のイメージ
　　IPアドレスを明示的に指定しなくても宛先のIPアドレスが分かる
・リソースレコード　
・ドメイン名＝ホスト名の集まり（企業などの組織がドメイン名を管理する）
・インターネット上ではドメインの階層化されている

【HTTPの概要】
・ハイパーテキストを転送するためのプロトコル
　➡テキストファイルを超えた機能をもつが汎用的な使い方をされている
・「HTTPS」は暗号化されているものが多く使用されている

●WEBアプリケーション
　・webブラウザをユーザインターフェースとするアプリケーション

【TCP/IPの設定】
●経路上の機器間で物理的な信号がきちんと送り届けられるようになっている
●経路鵜上の全ての機器の設定が正しく行われている
●利用するアプリケーションの設定が正しい
➡これらの設定のほとんど自動化されている

●IPアドレス
通信相手（インターフェース）を識別
●サブネットマスク
　➡IPアドレスのうち

●デフォルトゲートウェイ
➡同じネットワーク上のルータまたはレイヤ３スイッチのこと
他のネットワークはデフォルトゲートウェイの先にあるはず

